package main

import (
	// _ "AvitoTesting/docs"
	// "AvitoTesting/internal/config"
	// "AvitoTesting/internal/handlers"
	// "AvitoTesting/pkg/client/postgres"
	"D0SL_organizer/internal/config"
	"D0SL_organizer/internal/handlers"
	"net/http"

	"D0SL_organizer/internal/repositories"

	"fmt"
	"log"

	"github.com/gorilla/mux"
	// "gorm.io/gorm/logger"
	// httpSwagger "github.com/swaggo/http-swagger"
)

func main() {
	cfg := config.GetConfig()
	log.Println("config received", cfg)

	var repo repositories.VideoRepo
	r, error := repositories.NewMilvusRepo(cfg)
	if error != nil {
		log.Fatal("repo creating error")
	}
	repo = r
	log.Println("milvus video repo created")

	res, error := repo.GetSimilarVideosByVector([]float32{-0.20654296875, -0.2381591796875, 0.93896484375, -0.11810302734375, 0.0665283203125, -0.525390625, -0.9091796875, 0.7138671875, -0.56982421875, 0.564453125, 1.6552734375, -0.630859375, -0.2235107421875, -0.459228515625, 0.634765625, 0.06719970703125, -1.3876953125, -0.170166015625, 0.98779296875, -0.67919921875, -0.2900390625, -0.7001953125, -0.654296875, -0.1920166015625, -0.88427734375, 0.255126953125, 0.189697265625, 2.19140625, 0.8994140625, 0.62939453125, -0.625, -0.5703125, 0.1690673828125, -1.8310546875, -2.52734375, -0.04638671875, -1.5751953125, -0.11865234375, -1.5283203125, -0.76171875, 0.81689453125, 0.42529296875, 0.884765625, -0.30810546875, -0.43359375, 0.767578125, 0.59912109375, -1.9990234375, 1.06640625, -0.52978515625, 0.68603515625, -0.61962890625, -1.623046875, -0.439697265625, 0.8955078125, -1.4140625, -0.71826171875, 0.818359375, 0.71923828125, 0.058868408203125, -0.681640625, 0.701171875, -1.0625, 0.517578125, 0.96875, -0.55908203125, 1.498046875, -0.74462890625, 0.338623046875, 0.4365234375, -2.26171875, -0.130859375, -0.126953125, -0.296630859375, 0.03021240234375, 0.7080078125, 0.324951171875, -1.216796875, 0.485107421875, -0.1622314453125, 0.59716796875, 2.96484375, 1.9306640625, -0.9453125, 0.7158203125, -0.50927734375, -0.0885009765625, 0.93359375, 2.3203125, 0.12255859375, 1.0107421875, 1.126953125, -0.5048828125, 1.693359375, -0.1268310546875, -0.638671875, -1.5498046875, -0.311767578125, 0.168212890625, -2.26953125, 1.140625, 0.161376953125, -0.650390625, -1.27734375, -0.76611328125, -2.208984375, -1.14453125, -0.09918212890625, -0.447021484375, 0.9248046875, -1.1318359375, -1.2060546875, 1.0068359375, -1.33984375, -0.7890625, -0.5419921875, -0.51416015625, 0.90625, -0.167236328125, -0.4140625, -1.13671875, 0.414306640625, 1.7744140625, 1.2060546875, 1.2158203125, -2.419921875, 0.71728515625, 0.488525390625, -1.0146484375, -1.0, -0.5888671875, 1.0263671875, -0.3564453125, 0.20849609375, 1.880859375, 0.41943359375, 0.828125, -0.6708984375, -0.11639404296875, -0.853515625, 0.7109375, -0.78857421875, -0.37939453125, -0.8017578125, -0.82421875, 0.1737060546875, 0.578125, -1.8232421875, -0.60791015625, -0.60205078125, -1.4951171875, -1.189453125, -0.08123779296875, 0.466552734375, 1.216796875, -2.421875, 0.03302001953125, -0.350341796875, -0.27685546875, -0.08184814453125, -0.1741943359375, -0.044830322265625, -0.958984375, 0.478271484375, 0.98974609375, 1.3115234375, 0.2471923828125, -0.1654052734375, -0.97705078125, -1.5576171875, -0.63330078125, -0.96484375, -0.27685546875, 0.578125, -0.2320556640625, -1.2119140625, 0.28125, -1.1044921875, 0.122802734375, -0.06707763671875, -0.1846923828125, -0.339111328125, -0.00678253173828125, 0.267822265625, 1.05078125, 1.3994140625, -0.43310546875, 0.480712890625, -1.4248046875, -0.2025146484375, 0.293701171875, -1.330078125, 1.5009765625, -1.0224609375, 2.2109375, -1.0078125, 0.339599609375, -0.68505859375, -0.0247802734375, 0.28759765625, 0.5888671875, -1.708984375, 0.43603515625, -0.30615234375, 0.46533203125, -1.90234375, -0.08221435546875, -0.76123046875, -0.8916015625, 0.6982421875, -0.50390625, 2.568359375, 0.260498046875, -1.4697265625, -0.034149169921875, 0.7158203125, -0.0517578125, 1.169921875, -1.9189453125, 1.306640625, -0.1785888671875, 0.4482421875, 0.0086517333984375, -2.443359375, 0.2384033203125, 0.312744140625, -1.2451171875, 0.6103515625, -1.6220703125, 0.5302734375, -0.69091796875, 0.39892578125, 1.0234375, -0.04052734375, 0.775390625, -1.1806640625, -0.32958984375, 1.291015625, -0.93505859375, -0.81396484375, -0.11346435546875, -1.8505859375, 2.05078125, -0.94287109375, -2.1015625, 3.8359375, -0.55908203125, -0.218017578125, -0.198486328125, -1.7626953125, -0.051055908203125, -0.1365966796875, 0.0227813720703125, -0.122802734375, -0.82177734375, 0.8447265625, 0.578125, 0.89794921875, 0.630859375, 1.2119140625, 2.298828125, -0.69970703125, -2.20703125, -0.7724609375, -0.1822509765625, 0.154296875, 1.4716796875, 0.06585693359375, 0.08917236328125, -1.05859375, 0.30859375, 1.9853515625, -1.875, -1.125, -1.6005859375, 1.361328125, 0.07977294921875, 0.90673828125, -0.11004638671875, -0.07122802734375, -2.03515625, -0.0239410400390625, -0.3876953125, 0.269287109375, 0.34228515625, -0.19384765625, 0.07257080078125, -2.0703125, -1.0078125, 1.8291015625, -1.22265625, 0.6064453125, 0.86181640625, 0.44970703125, -0.51708984375, 2.158203125, 1.5849609375, 0.9130859375, -0.331787109375, 0.2452392578125, 1.6533203125, -0.0870361328125, -2.26171875, 0.1590576171875, 1.0712890625, -0.11456298828125, -1.35546875, 0.5615234375, 0.93359375, 0.08551025390625, 1.0595703125, -1.2255859375, -0.359375, 0.380615234375, -0.626953125, 0.71728515625, -0.5341796875, -0.587890625, 0.65771484375, -0.2078857421875, 0.9140625, 0.67236328125, -1.974609375, 2.974609375, 0.5673828125, 1.748046875, 0.70263671875, -0.32470703125, -0.26611328125, 0.61767578125, -0.467529296875, 1.7568359375, 2.046875, 0.92626953125, -1.529296875, -1.13671875, 0.41552734375, 0.284912109375, -1.7421875, 0.233642578125, -1.2294921875, -0.693359375, 0.56494140625, 0.44091796875, 0.88916015625, 0.83056640625, -0.9306640625, -0.333984375, 0.287841796875, 1.369140625, 0.31591796875, 0.9453125, -0.505859375, 1.7744140625, 0.374755859375, 1.173828125, -0.86669921875, -0.454345703125, -1.03515625, 0.1888427734375, 0.2432861328125, 2.25, 0.7861328125, -0.6083984375, 1.138671875, -0.286376953125, 0.99169921875, 0.34033203125, -0.59814453125, -1.78515625, -0.492431640625, 0.46826171875, -1.2216796875, -0.779296875, -1.0068359375, 1.9287109375, -0.84375, 0.6181640625, -0.86572265625, 1.2470703125, -0.86669921875, 0.2132568359375, -0.0078125, -1.328125, -0.52783203125, -1.125, 0.55908203125, 0.20556640625, 1.619140625, 0.818359375, 0.217529296875, 0.047119140625, 0.07586669921875, -0.1650390625, -0.7373046875, 2.158203125, 0.212158203125, -0.53466796875, 0.384765625, -0.459228515625, 0.411376953125, 0.935546875, -0.197021484375, -1.142578125, -0.9111328125, 0.5390625, 1.8310546875, 0.346923828125, 0.1004638671875, -0.168701171875, 0.06268310546875, -0.40869140625, 0.79638671875, -0.572265625, 1.5888671875, 0.52392578125, 0.97216796875, 0.3623046875, 0.88720703125, -0.49755859375, -2.06640625, -0.7646484375, 1.6689453125, -0.41748046875, -0.284912109375, 0.300048828125, -1.244140625, 0.93310546875, 0.69287109375, -0.7919921875, 1.3232421875, 0.650390625, -1.318359375, -0.7138671875, -0.1678466796875, -0.031402587890625, -0.175537109375, 1.185546875, -0.64404296875, 1.5849609375, -0.152099609375, 1.2646484375, -0.07635498046875, 0.0200347900390625, 0.54248046875, 1.162109375, 1.1953125, -1.7939453125, 0.74267578125, 0.08984375, 0.2259521484375, -0.66943359375, -0.52734375, 0.3076171875, 0.46142578125, -0.148193359375, 0.487548828125, -0.026763916015625, 1.681640625, -0.190185546875, -1.005859375, -0.9365234375, 1.4931640625, 0.2169189453125, 0.456787109375, 0.390380859375, 0.5615234375, -2.298828125, -0.583984375, 1.2744140625, -1.9248046875, -1.3193359375, 0.169921875, 0.53076171875, -0.482666015625, 1.9404296875, -1.0634765625, 0.322998046875, 1.0361328125, -0.36279296875, 1.1826171875, 0.609375, -0.7509765625, -0.054351806640625, 0.55322265625, 1.3623046875, 1.6708984375, -0.9228515625, -0.58544921875, 0.7763671875, 0.68505859375, -0.060516357421875, 0.1724853515625, 0.031463623046875, 1.1123046875, -1.033203125, -0.74658203125, 0.83935546875, -1.638671875, 0.3310546875, 1.087890625, 0.5078125, 0.96875, 0.1968994140625, -0.0977783203125, -0.77685546875, 0.10919189453125, 0.53271484375, 1.5732421875, 0.07757568359375, -0.5771484375, -1.16796875, 1.453125, -0.346923828125, 1.0869140625, -0.76220703125, 1.2431640625, -2.27734375, -1.0771484375, 0.191162109375, -0.40771484375, 0.97900390625, -0.197998046875, 2.021484375, -0.6162109375, -0.416015625, 1.3603515625, 1.150390625, -0.7001953125, -0.783203125, -1.42578125, 0.400390625, 0.90966796875, -1.43359375, 0.1002197265625, -1.16796875, 1.73046875, -0.405517578125, 0.12225341796875, -0.2110595703125, -0.51171875, 1.8134765625, 0.08575439453125, 1.6640625, 0.085205078125, 0.36962890625, 0.1151123046875, 0.9951171875, 0.73095703125, -1.494140625, -0.68701171875, 0.04168701171875, -0.7919921875, -0.481689453125, 0.094482421875, -2.158203125, 1.568359375, -0.289794921875, -2.34765625, -0.002391815185546875, -1.515625, 0.494140625, -0.89453125, 1.3486328125, -1.08984375, 1.552734375, -0.7744140625, -0.765625, 0.79150390625, -0.59033203125, -0.9140625, -2.3359375, 0.046295166015625, 0.162353515625, -0.204345703125, -0.066650390625, 0.1912841796875, -0.2296142578125, 0.92578125, -0.701171875, 0.4111328125, 0.243408203125, -0.79345703125, -1.4091796875, -0.70751953125, 0.25341796875, 0.1353759765625, 0.7314453125, -1.4052734375, -1.1630859375, -1.2138671875, 0.350341796875, 1.724609375, -0.356689453125, -1.2080078125, -0.0021686553955078125, -1.1494140625, -0.140380859375, -0.50537109375, -0.59814453125, -1.8466796875, -0.400146484375, -1.5654296875, 0.74072265625, 1.681640625, 1.2421875, -0.89990234375, 1.1796875, 2.71484375, -0.397705078125, -0.382568359375, 0.78955078125, 0.8447265625, 0.08673095703125, -0.477294921875, -0.8916015625, 0.09716796875, -0.89453125, 0.10986328125, 0.8505859375, 2.2734375, 0.80078125, -0.260009765625, -2.109375, 0.09283447265625, 0.43505859375, -0.2332763671875, 0.70751953125, -0.18310546875, 1.08984375, 0.425537109375, 0.09417724609375, 0.654296875, -0.59814453125, -0.427490234375, -1.861328125, -0.05584716796875, -1.0, -0.2474365234375, 1.220703125, -0.126220703125, 0.87744140625, 0.27197265625, 1.4052734375, -1.1845703125, 0.084716796875, 1.197265625, -0.328125, -2.205078125, 0.9248046875, 0.771484375, 1.6630859375, 1.4990234375, 0.97119140625, -0.8173828125, -0.086669921875, 0.55126953125, 0.347412109375, -0.69775390625, -0.52294921875, -0.287109375, 0.6591796875, -1.08203125, 0.26171875, -0.7802734375, -0.2437744140625, -0.75244140625, 0.421142578125, -0.1531982421875, 0.12939453125, -2.265625, 0.08966064453125, 0.9130859375, -0.23974609375, -1.1943359375, -0.7177734375, 0.8037109375, -0.1527099609375, 0.98095703125, 1.3388671875, -0.31640625, -0.2152099609375, -0.1732177734375, 0.11773681640625, -0.0168914794921875, 0.339599609375, 0.343017578125, -0.81591796875, -0.9091796875, 0.072998046875, 0.74169921875, 1.6240234375, -0.35888671875, 0.63818359375, 0.5556640625, 0.6572265625, -1.0625, -0.480224609375, 2.041015625, -0.65087890625, 2.787109375, 0.367431640625, 0.404541015625, -0.43359375, -0.084716796875, -0.859375, 0.397705078125, 2.310546875, 0.76171875, 1.0439453125, 0.2010498046875, -0.54443359375, 0.0272064208984375, -0.040740966796875, 0.007602691650390625, -0.4189453125, 0.91650390625, -1.1171875, 0.0518798828125, 0.192138671875, 1.3984375, -0.270751953125, -0.67822265625, 1.7705078125, 0.92431640625, -0.60595703125, 0.54150390625, 0.61328125, 0.4365234375, -0.73046875, -1.19140625, -0.79736328125, 0.72802734375, -1.9814453125, -1.34375, -0.73095703125, -0.32763671875, -0.49072265625, 1.6689453125, 0.476318359375, 0.67431640625, -0.8359375, -2.0703125, -0.52587890625, -0.4248046875, -0.52001953125, 0.765625, -0.8642578125, -0.09307861328125, -0.441162109375, 0.89794921875, -0.51416015625, 0.28125, 1.9365234375, 0.270751953125, -0.379150390625, 1.98046875, 0.5576171875, 1.732421875, 0.0167083740234375, -1.26171875, -1.021484375, -0.84814453125, -0.06414794921875, -0.1427001953125, -0.52001953125, -0.403564453125, -0.01149749755859375})
	fmt.Println(len(res), error, len([]float32{-0.20654296875, -0.2381591796875, 0.93896484375, -0.11810302734375, 0.0665283203125, -0.525390625, -0.9091796875, 0.7138671875, -0.56982421875, 0.564453125, 1.6552734375, -0.630859375, -0.2235107421875, -0.459228515625, 0.634765625, 0.06719970703125, -1.3876953125, -0.170166015625, 0.98779296875, -0.67919921875, -0.2900390625, -0.7001953125, -0.654296875, -0.1920166015625, -0.88427734375, 0.255126953125, 0.189697265625, 2.19140625, 0.8994140625, 0.62939453125, -0.625, -0.5703125, 0.1690673828125, -1.8310546875, -2.52734375, -0.04638671875, -1.5751953125, -0.11865234375, -1.5283203125, -0.76171875, 0.81689453125, 0.42529296875, 0.884765625, -0.30810546875, -0.43359375, 0.767578125, 0.59912109375, -1.9990234375, 1.06640625, -0.52978515625, 0.68603515625, -0.61962890625, -1.623046875, -0.439697265625, 0.8955078125, -1.4140625, -0.71826171875, 0.818359375, 0.71923828125, 0.058868408203125, -0.681640625, 0.701171875, -1.0625, 0.517578125, 0.96875, -0.55908203125, 1.498046875, -0.74462890625, 0.338623046875, 0.4365234375, -2.26171875, -0.130859375, -0.126953125, -0.296630859375, 0.03021240234375, 0.7080078125, 0.324951171875, -1.216796875, 0.485107421875, -0.1622314453125, 0.59716796875, 2.96484375, 1.9306640625, -0.9453125, 0.7158203125, -0.50927734375, -0.0885009765625, 0.93359375, 2.3203125, 0.12255859375, 1.0107421875, 1.126953125, -0.5048828125, 1.693359375, -0.1268310546875, -0.638671875, -1.5498046875, -0.311767578125, 0.168212890625, -2.26953125, 1.140625, 0.161376953125, -0.650390625, -1.27734375, -0.76611328125, -2.208984375, -1.14453125, -0.09918212890625, -0.447021484375, 0.9248046875, -1.1318359375, -1.2060546875, 1.0068359375, -1.33984375, -0.7890625, -0.5419921875, -0.51416015625, 0.90625, -0.167236328125, -0.4140625, -1.13671875, 0.414306640625, 1.7744140625, 1.2060546875, 1.2158203125, -2.419921875, 0.71728515625, 0.488525390625, -1.0146484375, -1.0, -0.5888671875, 1.0263671875, -0.3564453125, 0.20849609375, 1.880859375, 0.41943359375, 0.828125, -0.6708984375, -0.11639404296875, -0.853515625, 0.7109375, -0.78857421875, -0.37939453125, -0.8017578125, -0.82421875, 0.1737060546875, 0.578125, -1.8232421875, -0.60791015625, -0.60205078125, -1.4951171875, -1.189453125, -0.08123779296875, 0.466552734375, 1.216796875, -2.421875, 0.03302001953125, -0.350341796875, -0.27685546875, -0.08184814453125, -0.1741943359375, -0.044830322265625, -0.958984375, 0.478271484375, 0.98974609375, 1.3115234375, 0.2471923828125, -0.1654052734375, -0.97705078125, -1.5576171875, -0.63330078125, -0.96484375, -0.27685546875, 0.578125, -0.2320556640625, -1.2119140625, 0.28125, -1.1044921875, 0.122802734375, -0.06707763671875, -0.1846923828125, -0.339111328125, -0.00678253173828125, 0.267822265625, 1.05078125, 1.3994140625, -0.43310546875, 0.480712890625, -1.4248046875, -0.2025146484375, 0.293701171875, -1.330078125, 1.5009765625, -1.0224609375, 2.2109375, -1.0078125, 0.339599609375, -0.68505859375, -0.0247802734375, 0.28759765625, 0.5888671875, -1.708984375, 0.43603515625, -0.30615234375, 0.46533203125, -1.90234375, -0.08221435546875, -0.76123046875, -0.8916015625, 0.6982421875, -0.50390625, 2.568359375, 0.260498046875, -1.4697265625, -0.034149169921875, 0.7158203125, -0.0517578125, 1.169921875, -1.9189453125, 1.306640625, -0.1785888671875, 0.4482421875, 0.0086517333984375, -2.443359375, 0.2384033203125, 0.312744140625, -1.2451171875, 0.6103515625, -1.6220703125, 0.5302734375, -0.69091796875, 0.39892578125, 1.0234375, -0.04052734375, 0.775390625, -1.1806640625, -0.32958984375, 1.291015625, -0.93505859375, -0.81396484375, -0.11346435546875, -1.8505859375, 2.05078125, -0.94287109375, -2.1015625, 3.8359375, -0.55908203125, -0.218017578125, -0.198486328125, -1.7626953125, -0.051055908203125, -0.1365966796875, 0.0227813720703125, -0.122802734375, -0.82177734375, 0.8447265625, 0.578125, 0.89794921875, 0.630859375, 1.2119140625, 2.298828125, -0.69970703125, -2.20703125, -0.7724609375, -0.1822509765625, 0.154296875, 1.4716796875, 0.06585693359375, 0.08917236328125, -1.05859375, 0.30859375, 1.9853515625, -1.875, -1.125, -1.6005859375, 1.361328125, 0.07977294921875, 0.90673828125, -0.11004638671875, -0.07122802734375, -2.03515625, -0.0239410400390625, -0.3876953125, 0.269287109375, 0.34228515625, -0.19384765625, 0.07257080078125, -2.0703125, -1.0078125, 1.8291015625, -1.22265625, 0.6064453125, 0.86181640625, 0.44970703125, -0.51708984375, 2.158203125, 1.5849609375, 0.9130859375, -0.331787109375, 0.2452392578125, 1.6533203125, -0.0870361328125, -2.26171875, 0.1590576171875, 1.0712890625, -0.11456298828125, -1.35546875, 0.5615234375, 0.93359375, 0.08551025390625, 1.0595703125, -1.2255859375, -0.359375, 0.380615234375, -0.626953125, 0.71728515625, -0.5341796875, -0.587890625, 0.65771484375, -0.2078857421875, 0.9140625, 0.67236328125, -1.974609375, 2.974609375, 0.5673828125, 1.748046875, 0.70263671875, -0.32470703125, -0.26611328125, 0.61767578125, -0.467529296875, 1.7568359375, 2.046875, 0.92626953125, -1.529296875, -1.13671875, 0.41552734375, 0.284912109375, -1.7421875, 0.233642578125, -1.2294921875, -0.693359375, 0.56494140625, 0.44091796875, 0.88916015625, 0.83056640625, -0.9306640625, -0.333984375, 0.287841796875, 1.369140625, 0.31591796875, 0.9453125, -0.505859375, 1.7744140625, 0.374755859375, 1.173828125, -0.86669921875, -0.454345703125, -1.03515625, 0.1888427734375, 0.2432861328125, 2.25, 0.7861328125, -0.6083984375, 1.138671875, -0.286376953125, 0.99169921875, 0.34033203125, -0.59814453125, -1.78515625, -0.492431640625, 0.46826171875, -1.2216796875, -0.779296875, -1.0068359375, 1.9287109375, -0.84375, 0.6181640625, -0.86572265625, 1.2470703125, -0.86669921875, 0.2132568359375, -0.0078125, -1.328125, -0.52783203125, -1.125, 0.55908203125, 0.20556640625, 1.619140625, 0.818359375, 0.217529296875, 0.047119140625, 0.07586669921875, -0.1650390625, -0.7373046875, 2.158203125, 0.212158203125, -0.53466796875, 0.384765625, -0.459228515625, 0.411376953125, 0.935546875, -0.197021484375, -1.142578125, -0.9111328125, 0.5390625, 1.8310546875, 0.346923828125, 0.1004638671875, -0.168701171875, 0.06268310546875, -0.40869140625, 0.79638671875, -0.572265625, 1.5888671875, 0.52392578125, 0.97216796875, 0.3623046875, 0.88720703125, -0.49755859375, -2.06640625, -0.7646484375, 1.6689453125, -0.41748046875, -0.284912109375, 0.300048828125, -1.244140625, 0.93310546875, 0.69287109375, -0.7919921875, 1.3232421875, 0.650390625, -1.318359375, -0.7138671875, -0.1678466796875, -0.031402587890625, -0.175537109375, 1.185546875, -0.64404296875, 1.5849609375, -0.152099609375, 1.2646484375, -0.07635498046875, 0.0200347900390625, 0.54248046875, 1.162109375, 1.1953125, -1.7939453125, 0.74267578125, 0.08984375, 0.2259521484375, -0.66943359375, -0.52734375, 0.3076171875, 0.46142578125, -0.148193359375, 0.487548828125, -0.026763916015625, 1.681640625, -0.190185546875, -1.005859375, -0.9365234375, 1.4931640625, 0.2169189453125, 0.456787109375, 0.390380859375, 0.5615234375, -2.298828125, -0.583984375, 1.2744140625, -1.9248046875, -1.3193359375, 0.169921875, 0.53076171875, -0.482666015625, 1.9404296875, -1.0634765625, 0.322998046875, 1.0361328125, -0.36279296875, 1.1826171875, 0.609375, -0.7509765625, -0.054351806640625, 0.55322265625, 1.3623046875, 1.6708984375, -0.9228515625, -0.58544921875, 0.7763671875, 0.68505859375, -0.060516357421875, 0.1724853515625, 0.031463623046875, 1.1123046875, -1.033203125, -0.74658203125, 0.83935546875, -1.638671875, 0.3310546875, 1.087890625, 0.5078125, 0.96875, 0.1968994140625, -0.0977783203125, -0.77685546875, 0.10919189453125, 0.53271484375, 1.5732421875, 0.07757568359375, -0.5771484375, -1.16796875, 1.453125, -0.346923828125, 1.0869140625, -0.76220703125, 1.2431640625, -2.27734375, -1.0771484375, 0.191162109375, -0.40771484375, 0.97900390625, -0.197998046875, 2.021484375, -0.6162109375, -0.416015625, 1.3603515625, 1.150390625, -0.7001953125, -0.783203125, -1.42578125, 0.400390625, 0.90966796875, -1.43359375, 0.1002197265625, -1.16796875, 1.73046875, -0.405517578125, 0.12225341796875, -0.2110595703125, -0.51171875, 1.8134765625, 0.08575439453125, 1.6640625, 0.085205078125, 0.36962890625, 0.1151123046875, 0.9951171875, 0.73095703125, -1.494140625, -0.68701171875, 0.04168701171875, -0.7919921875, -0.481689453125, 0.094482421875, -2.158203125, 1.568359375, -0.289794921875, -2.34765625, -0.002391815185546875, -1.515625, 0.494140625, -0.89453125, 1.3486328125, -1.08984375, 1.552734375, -0.7744140625, -0.765625, 0.79150390625, -0.59033203125, -0.9140625, -2.3359375, 0.046295166015625, 0.162353515625, -0.204345703125, -0.066650390625, 0.1912841796875, -0.2296142578125, 0.92578125, -0.701171875, 0.4111328125, 0.243408203125, -0.79345703125, -1.4091796875, -0.70751953125, 0.25341796875, 0.1353759765625, 0.7314453125, -1.4052734375, -1.1630859375, -1.2138671875, 0.350341796875, 1.724609375, -0.356689453125, -1.2080078125, -0.0021686553955078125, -1.1494140625, -0.140380859375, -0.50537109375, -0.59814453125, -1.8466796875, -0.400146484375, -1.5654296875, 0.74072265625, 1.681640625, 1.2421875, -0.89990234375, 1.1796875, 2.71484375, -0.397705078125, -0.382568359375, 0.78955078125, 0.8447265625, 0.08673095703125, -0.477294921875, -0.8916015625, 0.09716796875, -0.89453125, 0.10986328125, 0.8505859375, 2.2734375, 0.80078125, -0.260009765625, -2.109375, 0.09283447265625, 0.43505859375, -0.2332763671875, 0.70751953125, -0.18310546875, 1.08984375, 0.425537109375, 0.09417724609375, 0.654296875, -0.59814453125, -0.427490234375, -1.861328125, -0.05584716796875, -1.0, -0.2474365234375, 1.220703125, -0.126220703125, 0.87744140625, 0.27197265625, 1.4052734375, -1.1845703125, 0.084716796875, 1.197265625, -0.328125, -2.205078125, 0.9248046875, 0.771484375, 1.6630859375, 1.4990234375, 0.97119140625, -0.8173828125, -0.086669921875, 0.55126953125, 0.347412109375, -0.69775390625, -0.52294921875, -0.287109375, 0.6591796875, -1.08203125, 0.26171875, -0.7802734375, -0.2437744140625, -0.75244140625, 0.421142578125, -0.1531982421875, 0.12939453125, -2.265625, 0.08966064453125, 0.9130859375, -0.23974609375, -1.1943359375, -0.7177734375, 0.8037109375, -0.1527099609375, 0.98095703125, 1.3388671875, -0.31640625, -0.2152099609375, -0.1732177734375, 0.11773681640625, -0.0168914794921875, 0.339599609375, 0.343017578125, -0.81591796875, -0.9091796875, 0.072998046875, 0.74169921875, 1.6240234375, -0.35888671875, 0.63818359375, 0.5556640625, 0.6572265625, -1.0625, -0.480224609375, 2.041015625, -0.65087890625, 2.787109375, 0.367431640625, 0.404541015625, -0.43359375, -0.084716796875, -0.859375, 0.397705078125, 2.310546875, 0.76171875, 1.0439453125, 0.2010498046875, -0.54443359375, 0.0272064208984375, -0.040740966796875, 0.007602691650390625, -0.4189453125, 0.91650390625, -1.1171875, 0.0518798828125, 0.192138671875, 1.3984375, -0.270751953125, -0.67822265625, 1.7705078125, 0.92431640625, -0.60595703125, 0.54150390625, 0.61328125, 0.4365234375, -0.73046875, -1.19140625, -0.79736328125, 0.72802734375, -1.9814453125, -1.34375, -0.73095703125, -0.32763671875, -0.49072265625, 1.6689453125, 0.476318359375, 0.67431640625, -0.8359375, -2.0703125, -0.52587890625, -0.4248046875, -0.52001953125, 0.765625, -0.8642578125, -0.09307861328125, -0.441162109375, 0.89794921875, -0.51416015625, 0.28125, 1.9365234375, 0.270751953125, -0.379150390625, 1.98046875, 0.5576171875, 1.732421875, 0.0167083740234375, -1.26171875, -1.021484375, -0.84814453125, -0.06414794921875, -0.1427001953125, -0.52001953125, -0.403564453125, -0.01149749755859375}))

	h := handlers.New(repo)

	fmt.Println("router created")
	router := mux.NewRouter()

	router.HandleFunc("/similar-videos", h.GetSimilarVideos).Methods(http.MethodGet)
	router.HandleFunc("/video", h.AddVideo).Methods(http.MethodPost)
	log.Println("API is running!")

	port := cfg.Listen.Port
	http.ListenAndServe(fmt.Sprintf(":%s", port), router)
}
